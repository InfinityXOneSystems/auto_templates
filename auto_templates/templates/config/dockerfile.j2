# {{ project_name | default('Project') }} Dockerfile
# Generated by auto_templates

FROM {{ base_image | default('python:3.11-slim') }}

{% if author %}
LABEL maintainer="{{ author }}{% if email %} <{{ email }}>{% endif %}"
{% endif %}
{% if description %}
LABEL description="{{ description }}"
{% endif %}

WORKDIR /app

{% if system_packages %}
# Install system dependencies
RUN apt-get update && apt-get install -y \
    {% for package in system_packages %}
    {{ package }} \
    {% endfor %}
    && rm -rf /var/lib/apt/lists/*
{% endif %}

# Copy requirements and install dependencies
{% if requirements_file %}
COPY {{ requirements_file }} .
RUN pip install --no-cache-dir -r {{ requirements_file }}
{% else %}
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
{% endif %}

# Copy application code
COPY . .

{% if expose_port %}
EXPOSE {{ expose_port }}
{% endif %}

{% if cmd %}
CMD {{ cmd }}
{% else %}
CMD ["python", "app.py"]
{% endif %}
